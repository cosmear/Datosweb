<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Professional Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="theme.js"></script> <!-- Load Theme Logic -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                     colors: {
                        dark: {
                            900: '#0f172a',
                            800: '#1e293b',
                            700: '#334155',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent-color: #3b82f6; 
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
        }
        .text-accent { color: var(--accent-color) !important; }
        .bg-accent { background-color: var(--accent-color) !important; }
        .border-accent { border-color: var(--accent-color) !important; }
        .ring-accent { box-shadow: 0 0 0 2px var(--accent-color); }

        .card {
            background-color: #1e293b; 
            border: 1px solid #334155;
            border-radius: 0.75rem; 
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            padding: 1.5rem;
        }
        
        /* Toggle Switch */
        .toggle-checkbox:checked {
            right: 0;
            border-color: var(--accent-color);
        }
        .toggle-checkbox:checked + .toggle-label {
            background-color: var(--accent-color);
        }

        /* Color Radio */
        .color-radio:checked + label .check-icon {
            display: block;
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Top Navigation -->
    <nav class="bg-dark-800 border-b border-dark-700 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                         <span class="text-2xl font-bold text-transparent bg-clip-text" style="background-image: linear-gradient(to right, var(--accent-color), #a855f7);">
                            DATA VISUALIZER
                        </span>
                    </div>
                    <div class="hidden md:block">
                        <div class="ml-10 flex items-baseline space-x-4">
                            <a href="index.html" class="text-gray-300 hover:bg-dark-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors">Dashboard</a>
                            <a href="reports.html" class="text-gray-300 hover:bg-dark-700 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors">Reports</a>
                            <a href="settings.html" class="bg-dark-900 text-accent px-3 py-2 rounded-md text-sm font-medium border border-dark-700">Settings</a>
                        </div>
                    </div>
                </div>
                <div class="flex items-center gap-4">
                     <div class="text-sm text-gray-400">
                        <span id="current-time"></span>
                     </div>
                    <div class="h-8 w-8 rounded-full bg-gradient-to-tr from-gray-700 to-gray-600 flex items-center justify-center text-white font-bold text-xs ring-accent">
                        JS
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-1 w-full max-w-3xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
        
        <h1 class="text-2xl font-bold text-white mb-6">Settings</h1>

        <div class="card mb-6">
            <h2 class="text-lg font-medium text-white mb-4">Appearance</h2>
            <div class="grid grid-cols-1 gap-6">
                
                <!-- Accent Color -->
                <div>
                    <label class="block text-sm font-medium text-gray-400 mb-3">Accent Color</label>
                    <div class="flex gap-4">
                        <div class="relative">
                            <input type="radio" name="accent" value="blue" id="color-blue" class="color-radio peer sr-only">
                            <label for="color-blue" class="w-10 h-10 rounded-full cursor-pointer bg-blue-500 block hover:ring-2 hover:ring-offset-2 hover:ring-offset-dark-900 hover:ring-blue-500 transition-all flex items-center justify-center">
                                <svg class="w-6 h-6 text-white check-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </label>
                        </div>
                        <div class="relative">
                            <input type="radio" name="accent" value="purple" id="color-purple" class="color-radio peer sr-only">
                            <label for="color-purple" class="w-10 h-10 rounded-full cursor-pointer bg-purple-500 block hover:ring-2 hover:ring-offset-2 hover:ring-offset-dark-900 hover:ring-purple-500 transition-all flex items-center justify-center">
                                <svg class="w-6 h-6 text-white check-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </label>
                        </div>
                        <div class="relative">
                            <input type="radio" name="accent" value="emerald" id="color-emerald" class="color-radio peer sr-only">
                            <label for="color-emerald" class="w-10 h-10 rounded-full cursor-pointer bg-emerald-500 block hover:ring-2 hover:ring-offset-2 hover:ring-offset-dark-900 hover:ring-emerald-500 transition-all flex items-center justify-center">
                                <svg class="w-6 h-6 text-white check-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </label>
                        </div>
                        <div class="relative">
                            <input type="radio" name="accent" value="orange" id="color-orange" class="color-radio peer sr-only">
                            <label for="color-orange" class="w-10 h-10 rounded-full cursor-pointer bg-orange-500 block hover:ring-2 hover:ring-offset-2 hover:ring-offset-dark-900 hover:ring-orange-500 transition-all flex items-center justify-center">
                                <svg class="w-6 h-6 text-white check-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </label>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="card mb-6">
             <h2 class="text-lg font-medium text-white mb-4">Dashboard Data</h2>
             <div class="grid grid-cols-1 gap-6">

                <!-- Refresh Rate -->
                <div>
                     <label class="block text-sm font-medium text-gray-400 mb-2">Auto-refresh Rate</label>
                     <select id="refresh-rate" class="bg-dark-800 border border-dark-700 text-white text-sm rounded-lg focus:ring-accent focus:border-accent block w-full p-2.5">
                        <option value="0">Disabled</option>
                        <option value="5">Every 5 seconds</option>
                        <option value="10">Every 10 seconds</option>
                        <option value="30">Every 30 seconds</option>
                     </select>
                </div>

                <!-- Simulation Toggle -->
                <div class="flex items-center justify-between">
                     <div>
                        <label for="simulation-toggle" class="block text-sm font-medium text-gray-300">Data Simulation</label>
                        <p class="text-xs text-gray-500">Enable random real-time data fluctuations.</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" id="simulation-toggle" class="sr-only peer">
                        <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                    </label>
                </div>
            </div>
        </div>
            
        <!-- Branding & Formatting Settings (New) -->
        <div class="card space-y-6">
            <h2 class="text-lg font-medium text-white mb-4">Formatting</h2>

            <!-- Font Size -->
            <div>
                <label for="font-size" class="block text-sm font-medium text-gray-300 mb-2">Font Size</label>
                <div class="relative">
                    <select id="font-size" class="appearance-none bg-dark-800 border border-dark-700 text-white text-sm rounded-lg focus:ring-accent focus:border-accent block w-full p-2.5 pr-8 cursor-pointer hover:bg-dark-700 transition-colors">
                        <option value="text-sm">Small</option>
                        <option value="text-base">Medium (Default)</option>
                        <option value="text-lg">Large</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                    </div>
                </div>
            </div>

            <!-- Currency -->
             <div>
                <label for="currency-select" class="block text-sm font-medium text-gray-300 mb-2">Currency</label>
                 <div class="relative">
                    <select id="currency-select" class="appearance-none bg-dark-800 border border-dark-700 text-white text-sm rounded-lg focus:ring-accent focus:border-accent block w-full p-2.5 pr-8 cursor-pointer hover:bg-dark-700 transition-colors">
                        <option value="USD">USD ($)</option>
                        <option value="EUR">EUR (€)</option>
                        <option value="GBP">GBP (£)</option>
                    </select>
                     <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                    </div>
                </div>
            </div>

            <!-- Decimal Places -->
             <div>
                <label for="decimals-select" class="block text-sm font-medium text-gray-300 mb-2">Decimal Places</label>
                 <div class="relative">
                    <select id="decimals-select" class="appearance-none bg-dark-800 border border-dark-700 text-white text-sm rounded-lg focus:ring-accent focus:border-accent block w-full p-2.5 pr-8 cursor-pointer hover:bg-dark-700 transition-colors">
                        <option value="0">0 (e.g. 100)</option>
                        <option value="1">1 (e.g. 100.5)</option>
                        <option value="2">2 (e.g. 100.50)</option>
                    </select>
                     <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                        <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"/></svg>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-6 flex justify-end">
            <button onclick="saveAndApply()" class="bg-accent text-white font-bold py-2 px-6 rounded hover:opacity-90 transition-opacity shadow-lg">
                Save Changes
            </button>
        </div>
        
        <div id="save-toast" class="fixed bottom-5 right-5 bg-green-500 text-white px-6 py-3 rounded shadow-lg transform translate-y-20 opacity-0 transition-all duration-300">
            Settings Saved!
        </div>

    </main>

    <script>
        // Clock
        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = now.toLocaleTimeString('es-ES');
        }
        setInterval(updateTime, 1000);
        updateTime();

        // Load current settings into form
        document.addEventListener('DOMContentLoaded', () => {
            const settings = DashboardTheme.settings;

            // Set color
            for (const [key, value] of Object.entries(DashboardTheme.accents)) {
                if (value === settings.accentColor) {
                    document.getElementById(`color-${key}`).checked = true;
                }
            }

            // Set refresh rate
            if(document.getElementById('refresh-rate')) {
                document.getElementById('refresh-rate').value = settings.refreshRate || 0;
            }

            // Set simulation
            if(document.getElementById('simulation-toggle')) {
                document.getElementById('simulation-toggle').checked = settings.simulateData;
            }

            // Set formatting settings
            if(document.getElementById('font-size')) {
                document.getElementById('font-size').value = settings.fontSize || 'text-base';
            }
            if(document.getElementById('currency-select')) {
                document.getElementById('currency-select').value = settings.currency || 'USD';
            }
            if(document.getElementById('decimals-select')) {
                document.getElementById('decimals-select').value = settings.decimals !== undefined ? settings.decimals : 2;
            }
        });

        // Save Function
        function saveAndApply() {
            const selectedColorRadio = document.querySelector('input[name="accent"]:checked');
            // If nothing checked, default to blue or keep current? Let's default to blue if none found, but ideally one is checked.
            const colorKey = selectedColorRadio ? selectedColorRadio.value : 'blue';
            // DashboardTheme.colors was undefined in previous code, it should be DashboardTheme.accents based on theme.js inspection
            const accentHex = DashboardTheme.accents[colorKey] || '#3b82f6';
            
            const refreshRate = parseInt(document.getElementById('refresh-rate').value);
            const simulateData = document.getElementById('simulation-toggle').checked;
            
            const fontSize = document.getElementById('font-size').value;
            const currency = document.getElementById('currency-select').value;
            const decimals = parseInt(document.getElementById('decimals-select').value);

            const newSettings = {
                accentColor: accentHex,
                refreshRate: refreshRate,
                simulateData: simulateData,
                fontSize: fontSize,
                currency: currency,
                decimals: decimals
            };

            // Correct function name is saveSettings based on theme.js
            DashboardTheme.saveSettings(newSettings);

            // Show Toast
            const toast = document.getElementById('save-toast');
            toast.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => {
                toast.classList.add('translate-y-20', 'opacity-0');
            }, 3000);
        }
    </script>
</body>
</html>
